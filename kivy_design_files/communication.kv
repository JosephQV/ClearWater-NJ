<CommunicationScreen>:
    name: "communication_screen"
    nav_bar_id: nav_bar_id
    on_enter: self.nav_bar_id.color_buttons(self.name)

    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height

        UserMenuNavigation:

        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            size_hint: (1.00, 0.78)
            size: (root.width, root.height)

            BoxLayout:
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height
                padding: 10

                FeedbackNavigationMenu:
        
        ScreenNavigationBar:
            id: nav_bar_id


<FeedbackNavigationMenu>:
    orientation: "vertical"
    size_hint_y: None
    height: self.minimum_height
    spacing: 10
    padding: 10

    Label:
        size_hint_y: None
        text: app.text["communication_screen"]["overview"][app.language]
        color: "#000000"
        text_size: root.width, None
        size: self.texture_size
        halign: "center"
        
    Label:
        size_hint_y: None
        height: 90
        color: "#000000"
        text: "I have concerns or feedback about..." 

    GridLayout:
        size_hint_y: None
        height: self.minimum_height
        cols: 2
        padding: 10
        spacing: 10

        FeedbackMenuItem:
            button_text: "My Tap Water Quality"
            screen: "tapwaterfeedback_screen"

        FeedbackMenuItem:
            button_text: "My Water Bill"
            screen: "waterbillfeedback_screen"

        FeedbackMenuItem:
            button_text: "Home Water Pipes"
            screen: "homepipesfeedback_screen"

        FeedbackMenuItem:
            button_text: "State Water Infrastructure"
            screen: "stateinfrastructurefeedback_screen"

        FeedbackMenuItem:
            button_text: "Local Surface Water"
            screen: "surfacewaterfeedback_screen"

        FeedbackMenuItem:
            button_text: "Industrial Water Pollution"
            screen: "pollutionfeedback_screen"

        FeedbackMenuItem:
            button_text: "Flooding"
            screen: "floodingfeedback_screen"
        
        FeedbackMenuItem:
            button_text: "Watershed Conditions"
            screen: "watershedfeedback_screen"


<FeedbackMenuItem>
    height: 100
    size_hint_y: None
    text: self.button_text
    text_size: self.width - 10, self.height - 10
    halign: "center"
    valign: "middle"
    font_size: "14sp"
    background_normal: ""
    background_color: app.colors["secondary"]["rgba"]
    background_down: ""
    on_release: 
        app.root.switch_screens(root.screen, None)


<TapWaterFeedbackScreen>:
    name: "tapwaterfeedback_screen"

    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height

        BackMenuBar:
            title_text: "Tap Water Feedback"
            back_screen: "communication_screen"

        FloatLayout:
            orientation: "vertical"
            size_hint: 1.00, 1.00

            Label:
                text: "Concerned about the safety of your tap water? Find help below with..."
                color: "#000000"
                text_size: self.width, None
                size: 500, 100
                size_hint: None, None
                halign: "center"
                pos_hint: {"center_x": 0.50, "top": 0.95}
                color: "#000000"

            Button:
                text: "Home water testing kits"
                background_down: ""
                background_normal: ""
                background_color: app.colors["secondary"]["rgba"]
                text_size: self.width, None
                size: 400, 100
                size_hint: None, None
                halign: "center"
                pos_hint: {"center_x": 0.50, "top": 0.80}
                padding: 10
                on_release: root.open_link(root.testkitslink)

            Button:
                text: "Checking for lead pipes in your residence"
                background_down: ""
                background_normal: ""
                background_color: app.colors["secondary"]["rgba"]
                text_size: self.width, None
                size: 400, 100
                halign: "center"
                padding: 10
                size_hint: None, None
                pos_hint: {"center_x": 0.50, "top": 0.65}
                on_release: root.open_link(root.checkpipeslink)

            Button:
                text: "Submit a complaint to your water system or the New Jersey Department of Environmental Protection"
                background_down: ""
                background_normal: ""
                text_size: self.width, None
                background_color: app.colors["secondary"]["rgba"]
                size: 400, 100
                padding: 10
                halign: "center"
                size_hint: None, None
                pos_hint: {"center_x": 0.50, "top": 0.50}
                on_release: root.open_link(root.njdepcomplaintlink)

            Button:
                text: "Send a direct email through ClearWater NJ"
                background_down: ""
                background_normal: ""
                text_size: self.width, None
                background_color: app.colors["secondary"]["rgba"]
                size: 400, 100
                padding: 10
                halign: "center"
                size_hint: None, None
                pos_hint: {"center_x": 0.50, "top": 0.35}
                on_release: 
                    e = app.root.get_screen("email_screen")
                    e.recipient = "watersupply@dep.nj.gov"
                    e.email_subject_text = "Water Quality Complaint -" + app.user_data["water_system"]
                    e.email_body_text = "(Write your complaint here)"
                    app.root.switch_screens("email_screen", None)

            Image:
                source: r"C:\Users\josep\Desktop\Code\Local Projects\GSSTeam12Project\resources\icons\njdep_icon.png"
                size: 180, 180
                size_hint: None, None
                pos_hint: {"center_x": 0.50, "top": 0.25}


<WaterBillFeedbackScreen>:
    name: "waterbillfeedback_screen"

    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height

        BackMenuBar:
            title_text: "Water Bill Feedback"
            back_screen: "communication_screen"

        FloatLayout:
            orientation: "vertical"
            size_hint: 1.00, 1.00


<HomePipesFeedbackScreen>:
    name: "homepipesfeedback_screen"

    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height

        BackMenuBar:
            title_text: "Home Water Pipes Feedback"
            back_screen: "communication_screen"

        FloatLayout:
            orientation: "vertical"
            size_hint: 1.00, 1.00


<StateInfrastructureFeedbackScreen>:
    name: "stateinfrastructurefeedback_screen"

    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height

        BackMenuBar:
            title_text: "Water Infrastructure Feedback"
            back_screen: "communication_screen"

        FloatLayout:
            orientation: "vertical"
            size_hint: 1.00, 1.00


<SurfaceWaterFeedbackScreen>:
    name: "surfacewaterfeedback_screen"

    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height

        BackMenuBar:
            title_text: "Surface Water Feedback"
            back_screen: "communication_screen"

        FloatLayout:
            orientation: "vertical"
            size_hint: 1.00, 1.00


<PollutionFeedbackScreen>:
    name: "pollutionfeedback_screen"

    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height

        BackMenuBar:
            title_text: "Water Pollution Feedback"
            back_screen: "communication_screen"

        FloatLayout:
            orientation: "vertical"
            size_hint: 1.00, 1.00


<FloodingFeedbackScreen>:
    name: "floodingfeedback_screen"

    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height

        BackMenuBar:
            title_text: "Flooding Feedback"
            back_screen: "communication_screen"

        FloatLayout:
            orientation: "vertical"
            size_hint: 1.00, 1.00


<WatershedFeedbackScreen>:
    name: "watershedfeedback_screen"

    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height

        BackMenuBar:
            title_text: "Regional Watershed Feedback"
            back_screen: "communication_screen"

        FloatLayout:
            orientation: "vertical"
            size_hint: 1.00, 1.00


# An email form that will be recycled for any case of user feedback as needed.
<EmailScreen>:
    name: "email_screen"
    id: email_screen    # giving an id so we can reference the screen elsewhere in this widget definition

    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height

        BackMenuBar:
            title_text: "Email Feedback"
            back_screen: "communication_screen"

        BoxLayout:
            orientation: "vertical"
            size_hint: (1.00, 0.85)    # (width, height) size hints are relative to the parent widget
            padding: 12                # outer margin separation

            Label:
                size_hint: (1.00, 0.10)    # these size hints are relative to the above Box Layout
                text: email_screen.recipient
                halign: "left"
                color: "#000000"

            TextInput:
                size_hint: (1.00, 0.10)
                text: email_screen.email_subject_text
                on_text: email_screen.email_subject_text = self.text    # updating the subject text as it is entered
                padding: 12                      

            TextInput:
                size_hint: (1.00, 0.70)
                text: email_screen.email_body_text
                on_text: email_screen.email_body_text = self.text    # updating the body text as it is entered
                padding: 12               

            Button:
                size_hint: (1.00, 0.10)
                text: "Send"
                background_normal: ""
                background_color: app.colors["secondary"]["rgba"]
                background_down: ""
                on_release: email_screen.submit_email()



        


    

        